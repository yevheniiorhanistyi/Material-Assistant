(()=>{var e={139:function(e){e.exports=function(){"use strict";var e={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function t(e){var t=arguments;return this.replace(/\${([^{}]*)}/g,(function(e,n){return t[n]}))}function n(e){return e.pristine.self.form.querySelectorAll('input[name="'+e.getAttribute("name")+'"]:checked').length}var r={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"},a="pristine-error",o=["required","min","max","minlength","maxlength","pattern"],i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,l="en",c={},d=function(e,t){t.name=e,void 0===t.priority&&(t.priority=1),c[e]=t};function u(n,i,d){var u=this;function m(e,t,n,r){var a=c[n];if(a&&(e.push(a),r)){var o="pattern"===n?[r]:r.split(",");o.unshift(null),t[n]=o}}function p(n){for(var r=[],a=!0,o=0;n.validators[o];o++){var i=n.validators[o],s=n.params[i.name]?n.params[i.name]:[];if(s[0]=n.input.value,!i.fn.apply(n.input,s)&&(a=!1,"function"==typeof i.msg?r.push(i.msg(n.input.value,s)):"string"==typeof i.msg?r.push(t.apply(i.msg,s)):i.msg===Object(i.msg)&&i.msg[l]?r.push(t.apply(i.msg[l],s)):n.messages[l]&&n.messages[l][i.name]?r.push(t.apply(n.messages[l][i.name],s)):e[l]&&e[l][i.name]?r.push(t.apply(e[l][i.name],s)):r.push(t.apply(e[l].default,s)),!0===i.halt))break}return n.errors=r,a}function b(e){if(e.errorElements)return e.errorElements;var t=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(e.input,u.config.classTo),n=null,r=null;return(n=u.config.classTo===u.config.errorTextParent?t:t.querySelector("."+u.config.errorTextParent))&&((r=n.querySelector("."+a))||((r=document.createElement(u.config.errorTextTag)).className=a+" "+u.config.errorTextClass,n.appendChild(r),r.pristineDisplay=r.style.display)),e.errorElements=[t,r]}function v(e){var t=b(e),n=t[0],r=t[1],a=e.input,o="error-"+(a.id||Math.floor((new Date).valueOf()*Math.random()));n&&(n.classList.remove(u.config.successClass),n.classList.add(u.config.errorClass),a.setAttribute("aria-describedby",o),a.setAttribute("aria-invalid","true")),r&&(r.setAttribute("id",o),r.setAttribute("role","alert"),r.innerHTML=e.errors.join("<br/>"),r.style.display=r.pristineDisplay||"")}function f(e){var t=function(e){var t=b(e),n=t[0],r=t[1],a=e.input;return n&&(n.classList.remove(u.config.errorClass),n.classList.remove(u.config.successClass),a.removeAttribute("aria-describedby"),a.removeAttribute("aria-invalid")),r&&(r.removeAttribute("id"),r.removeAttribute("role"),r.innerHTML="",r.style.display="none"),t}(e)[0];t&&t.classList.add(u.config.successClass)}return function(e,t,n){e.setAttribute("novalidate","true"),u.form=e,u.config=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e}(t||{},r),u.live=!(!1===n),u.fields=Array.from(e.querySelectorAll("input:not([type^=hidden]):not([type^=submit]), select, textarea")).map(function(e){var t=[],n={},r={};return[].forEach.call(e.attributes,(function(e){if(/^data-pristine-/.test(e.name)){var a=e.name.substr(14),i=a.match(s);if(null!==i){var l=void 0===i[1]?"en":i[1];return r.hasOwnProperty(l)||(r[l]={}),void(r[l][a.slice(0,a.length-i[0].length)]=e.value)}"type"===a&&(a=e.value),m(t,n,a,e.value)}else~o.indexOf(e.name)?m(t,n,e.name,e.value):"type"===e.name&&m(t,n,e.value)})),t.sort((function(e,t){return t.priority-e.priority})),u.live&&e.addEventListener(~["radio","checkbox"].indexOf(e.getAttribute("type"))?"change":"input",function(e){u.validate(e.target)}.bind(u)),e.pristine={input:e,validators:t,params:n,messages:r,self:u}}.bind(u))}(n,i,d),u.validate=function(e,t){t=e&&!0===t||!0===e;var n=u.fields;!0!==e&&!1!==e&&(e instanceof HTMLElement?n=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(n=Array.from(e).map((function(e){return e.pristine}))));for(var r=!0,a=0;n[a];a++){var o=n[a];p(o)?!t&&f(o):(r=!1,!t&&v(o))}return r},u.getErrors=function(e){if(!e){for(var t=[],n=0;n<u.fields.length;n++){var r=u.fields[n];r.errors.length&&t.push({input:r.input,errors:r.errors})}return t}return e.tagName&&"select"===e.tagName.toLowerCase()?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors},u.addValidator=function(e,t,n,r,a){e instanceof HTMLElement?(e.pristine.validators.push({fn:t,msg:n,priority:r,halt:a}),e.pristine.validators.sort((function(e,t){return t.priority-e.priority}))):console.warn("The parameter elem must be a dom element")},u.addError=function(e,t){(e=e.length?e[0]:e).pristine.errors.push(t),v(e.pristine)},u.reset=function(){for(var e=0;u.fields[e];e++)u.fields[e].errorElements=null;Array.from(u.form.querySelectorAll("."+a)).map((function(e){e.parentNode.removeChild(e)})),Array.from(u.form.querySelectorAll("."+u.config.classTo)).map((function(e){e.classList.remove(u.config.successClass),e.classList.remove(u.config.errorClass)}))},u.destroy=function(){u.reset(),u.fields.forEach((function(e){delete e.input.pristine})),u.fields=[]},u.setGlobalConfig=function(e){r=e},u}return d("text",{fn:function(e){return!0},priority:0}),d("required",{fn:function(e){return"radio"===this.type||"checkbox"===this.type?n(this):void 0!==e&&""!==e.trim()},priority:99,halt:!0}),d("email",{fn:function(e){return!e||i.test(e)}}),d("number",{fn:function(e){return!e||!isNaN(parseFloat(e))},priority:2}),d("integer",{fn:function(e){return!e||/^\d+$/.test(e)}}),d("minlength",{fn:function(e,t){return!e||e.length>=parseInt(t)}}),d("maxlength",{fn:function(e,t){return!e||e.length<=parseInt(t)}}),d("min",{fn:function(e,t){return!e||("checkbox"===this.type?n(this)>=parseInt(t):parseFloat(e)>=parseFloat(t))}}),d("max",{fn:function(e,t){return!e||("checkbox"===this.type?n(this)<=parseInt(t):parseFloat(e)<=parseFloat(t))}}),d("pattern",{fn:function(e,t){var n=t.match(new RegExp("^/(.*?)/([gimy]*)$"));return!e||new RegExp(n[1],n[2]).test(e)}}),d("equals",{fn:function(e,t){var n=document.querySelector(t);return n&&(!e&&!n.value||n.value===e)}}),u.addValidator=function(e,t,n,r,a){d(e,{fn:t,msg:n,priority:r,halt:a})},u.prototype.addMessages=function(t,n){var r=e.hasOwnProperty(t)?e[t]:e[t]={};Object.keys(n).forEach((function(e,t){r[e]=n[e]}))},u.prototype.setLocale=function(e){l=e},u}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}(()=>{"use strict";const e=(e,t)=>{const n=document.createElement(e);return n.classList=t,n},t=(e,t)=>{localStorage.setItem(e,t)},r=e=>localStorage.getItem(e),a=e=>{localStorage.removeItem(e)},o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const s=new Uint8Array(16);function l(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));const d=function(e,t,n){if(o.randomUUID&&!t&&!e)return o.randomUUID();const r=(e=e||{}).random||(e.rng||l)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]}(r)},u=[{uid:d(),tabText:"Arkusz 1",selected:!0},{uid:d(),tabText:"Arkusz 2",selected:!1},{uid:d(),tabText:"Arkusz 3",selected:!1},{uid:d(),tabText:"Arkusz 4",selected:!1},{uid:d(),tabText:"Arkusz 5",selected:!1}],m={required:"To pole jest wymagane",email:"To pole wymaga prawidłowego adresu e-mail",number:"To pole wymaga liczby",integer:"To pole wymaga wartości całkowitej",url:"To pole wymaga prawidłowego adresu URL strony internetowej",tel:"To pole wymaga prawidłowego numeru telefonu",maxlength:"Długość tego pola musi być < 1",minlength:"Długość tego pola musi być > 1",min:"Minimalna wartość dla tego pola to 1",max:"Maksymalna wartość dla tego pola 100",pattern:"Proszę dopasować żądany format",equals:"Dwa pola nie są takie same",default:"Proszę wprowadzić poprawną wartość"},p="success",b="error",v={portionForm:{title:"Kalkulator porcji pod stan surowca",id:"portionForm"},orderForm:{title:"Kalkulator zamówienia",id:"orderForm"}},f={grammage:"#grammage-select",mixerSize:"#mixer-size-select",percentage:"#material-input",totalRawMaterial:"#raw-material-input"},g={RTPJ:"#RTPJ",materialDescription:".material-description",materialIndex:".material-index",materialPercentage:".material-percentage",materialQuantity:".material-quantity",requiredQuantity:".required-quantity",productionQuantity:"#production-quantity",currentMixer:"#current-mixer",mixerSize:"#mixer-size-select",grammage:"#grammage-select"},h="Czy na pewno chcesz usunąć wprowadzone dane?",y="Wprowadzone dane w formularzu na tej stronie zostaną usunięte.",x=[{id:"portionForm",icon:'<svg class="icon utils-list__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n    data-testid="FormatListBulletedIcon" tabindex="-1" title="FormatListBulleted">\n    <path\n      d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5m0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5m0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5M7 19h14v-2H7zm0-6h14v-2H7zm0-8v2h14V5z">\n    </path>\n  </svg>',text:"Porcji"},{id:"orderForm",icon:'<svg class="icon utils-list__icon"\n    focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="FeaturedPlayListIcon" tabindex="-1"\n    title="FeaturedPlayList">\n    <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-9 8H3V9h9zm0-4H3V5h9z">\n    </path>\n  </svg>',text:"Zamówienia"}],w=[{id:"analytics",icon:'<svg class="icon utils-list__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n    data-testid="SettingsIcon">\n    <path\n      d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6">\n    </path>\n  </svg>',text:"Analityka"},{id:"performance",icon:'<svg class="icon utils-list__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n    data-testid="TimerIcon">\n    <path\n      d="M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z">\n    </path>\n  </svg>',text:"Wydajność"},{id:"database",icon:'<svg class="icon utils-list__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n    data-testid="DnsRoundedIcon">\n    <path\n      d="M19 13H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2M7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2M19 3H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2">\n    </path>\n  </svg>',text:"Baza danych"}],L=()=>{const e=document.querySelector("body"),t=document.querySelector(".backdrop"),n=document.querySelector(".custom-modal"),r=n.querySelector(".modal__title"),a=n.querySelector(".modal__text"),o=n.querySelector("#modal-button-confirm"),i=n.querySelector("#modal-button-cancel"),s=()=>{t.classList.remove("backdrop-show"),n.classList.remove("custom-modal--open"),e.classList.remove("overflow-hidden")};return{handleOpen:(l,c,d)=>{r.innerHTML=l,a.innerHTML=c,t.classList.add("backdrop-show"),n.classList.add("custom-modal--open"),e.classList.add("overflow-hidden");const u=()=>{o.removeEventListener("click",u),i.removeEventListener("click",m),s(),d()},m=()=>{t.removeEventListener("click",m),o.removeEventListener("click",u),i.removeEventListener("click",m),s()};i.addEventListener("click",m),o.addEventListener("click",u),t.addEventListener("click",m)},handleClose:s}},q=(t,n,r=3e3)=>{const a=document.querySelector(".snackbar-container"),o=e("div",`snackbar ${{success:"snackbar--success",error:"snackbar--error"}[n]}`);o.setAttribute("role","alert"),o.innerHTML=`\n  ${{success:'\n    <svg class="snackbar__icon" viewBox="0 0 24 24" focusable="false">\n      <path d="M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41\n        10.59L10 14.17L17.59 6.58L19 8L10 17Z">\n      </path>\n  </svg>\n    ',error:'\n    <svg class="snackbar__icon" viewBox="0 0 24 24" focusable="false">\n    <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,\n        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,\n        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z">\n    </path>\n  </svg>\n    '}[n]}\n  ${t}`,a.append(o),setTimeout((()=>{o.remove()}),r)},S=(n,o,i)=>{(()=>{const t=document.querySelector(".header"),n=e("div","tabs");n.innerHTML='\n  <ul class="tabs-list"></ul>\n  <div class="button-wrapper">\n    <button class="icon-button create-tab">\n      <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="AddCircleIcon"\n        tabindex="-1" title="AddCircle">\n        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z">\n        </path>\n      </svg>\n    </button>\n    <button class="icon-button reload-tabs">\n      <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="RefreshIcon">\n        <path\n          d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z">\n        </path>\n      </svg>\n    </button>\n  </div>\n',t.append(n)})();const s=document.querySelector(".tabs-list"),l=document.querySelector(".create-tab"),c=document.querySelector(".reload-tabs"),{handleOpen:m}=L();let b=JSON.parse(r(n))||[...u];function v(e){if(e.classList.contains("selected"))return;const r=document.querySelectorAll(".tab-button"),a=e.getAttribute("data-tab");r.forEach((e=>e.classList.remove("selected"))),e.classList.add("selected");const o=b.map((e=>({...e,selected:e.uid===a})));t(n,JSON.stringify(o)),i(a)}function f(e){const t=e,n=document.createElement("span");n.style.visibility="hidden",n.style.position="absolute",n.style.whiteSpace="nowrap",n.textContent=e.value,document.body.append(n);const r=n.offsetWidth;document.body.removeChild(n),t.style.width=`${r}px`}function g(r){const a=e("li","tabs-list__item"),o=e("button","tab-button");o.textContent=r.tabText,o.setAttribute("data-tab",r.uid),r.selected&&o.classList.add("selected"),a.append(o),s.append(a),o.addEventListener("click",(()=>{v(o,r.uid)})),o.addEventListener("contextmenu",(e=>{!function(e,r){e.preventDefault();const a=r;v(r);const o=document.createElement("div");o.classList.add("custom-menu"),o.innerHTML='\n  <ul class="custom-menu__list">\n    <li class="custom-menu__item delete">Usuń</li>\n    <li class="custom-menu__item rename">Zmień nazwę</li>\n  </ul>\n  ',o.style.top=`${e.clientY}px`,o.style.left=`${e.clientX}px`;const i=document.createElement("div");i.classList.add("custom-menu__overlay");const s=()=>{o.remove(),i.remove(),i.removeEventListener("click",s)};i.addEventListener("click",s),o.querySelector(".delete").addEventListener("click",(()=>{const e=r.closest(".tabs-list__item");if(e&&b.length>1){const r=e.querySelector(".tab-button").getAttribute("data-tab");b=b.filter((e=>e.uid!==r)),e.remove();const a=document.querySelectorAll(".tab-button")[0];t(n,JSON.stringify(b)),v(a)}s()})),o.querySelector(".rename").addEventListener("click",(()=>{o.remove();const e=r.textContent,s=document.createElement("input");s.type="text",s.setAttribute("maxlength",30),s.classList.add("tab-input"),s.value=e,a.innerHTML="",r.appendChild(s),s.select(),s.focus(),f(s),s.addEventListener("input",(()=>{f(s)})),s.addEventListener("blur",(()=>{const o=s.value.trim();if(""!==o){a.textContent=o;const e=a.getAttribute("data-tab");b=b.map((t=>t.uid===e?{...t,tabText:o}:t)),t(n,JSON.stringify(b)),v(r)}else a.textContent=e})),s.addEventListener("keydown",(e=>{"Enter"===e.key&&(s.blur(),i.remove())}))})),document.body.append(o,i)}(e,o)}))}t(n,JSON.stringify(b)),b.forEach((e=>{g(e)}));const h=()=>{a(n),a(o),b=[...u],s.innerHTML="",b.forEach((e=>{g(e)})),t(n,JSON.stringify(b)),i(),q("Dane pomyślnie wyczyszczone!",p)};l.addEventListener("click",(()=>{const e=function(){if(b.length>=12)return null;const e={uid:d(),tabText:`Arkusz ${b.length+1}`,selected:!1};return b.push(e),t(n,JSON.stringify(b)),e}();e&&g(e)})),c.addEventListener("click",(()=>{m("Czy na pewno chcesz usunąć wszystkie wprowadzone dane?","Wprowadzone dane w formularzach na wszystkich wcześniej utworzonych arkuszach zostaną usunięte.",h)}))};var _=n(139);const k=()=>{const t=document.querySelector(".main"),n=document.querySelector(".convert"),r=n.querySelector(".form-control"),a=document.querySelector("#material-input"),o=document.querySelector("#mixer-size-select"),i=document.querySelector(".custom-popover__overlay")||e("div","custom-popover__overlay"),s=()=>{const e=100*Number(r.value)/Number(o.value);a.value=Number(e.toFixed(1))},l=()=>{n.classList.remove("show"),r.removeEventListener("input",s),r.removeEventListener("keydown",c),i.removeEventListener("click",l),i.remove()},c=e=>{"Enter"===e.key&&l()};n.classList.add("show"),r.addEventListener("input",s),r.addEventListener("keydown",c),i.addEventListener("click",l),t.append(i)},z=(e,t)=>e.find((e=>e.uid===t)),E=(e,t)=>t*e/100,M=(e,t,n)=>Math.round(e*n/t),T=t=>{const n=document.querySelector(".forms-wrapper"),a=n.querySelector(".portion-calculate-result");a&&a.remove();const o=e("div","portion-calculate-result"),i=JSON.parse(r("portionFormData"))||[],s=z(i,t);if(s){const{percentage:e,totalRawMaterial:t,grammage:r,mixerSize:a}=s,i=(l=e,Math.ceil(270*l/100)),c=(e=>Math.ceil(450*e/100))(e),d=E(e,a),u=(t=0)=>{const n=m+b,i=Math.ceil(a/r*m)+Math.ceil(v/r*b),s=E(e,v);o.innerHTML=`\n    <table class="portion-result-table">\n      <thead>\n        <tr>\n          <th>Porcji (kg)</th>\n          <th>Udział składnika (kg)</th>\n          <th>Ilość (szt)</th>\n        </tr>\n      </thead>\n      <tbody>\n       ${0!==m?`<tr>\n          <td>${a}</td>\n          <td>${Math.round(d)}</td>\n          <td>${m}</td>\n        </tr>`:""}\n        <tr>\n          <td>${v}</td>\n          <td>${Math.round(s)}</td>\n          <td>${b}</td>\n        </tr>\n        <tr>\n          <td class="border-none" rowspan=${t>0?"3":"2"}></td>\n          <td class="font-medium align-left">Ogólna ilość mieszałek (szt)</td>\n          <td>${n}</td>\n        </tr>\n        ${t>0?`\n        <tr>\n          <td class="font-medium align-left">Pozostała ilość materiału po liczeniu (kg)</td>\n          <td>${t}</td>\n        </tr>\n        `:""}\n        <tr>\n          <td class="font-medium align-left border-none">Ilość puszek dla wygenerowanych mieszałek (szt)</td>\n          <td class="border-none">${i}</td>\n        </tr>\n      </tbody>\n    </table>\n    `};let m=Math.floor(t/d),p=t-m*d,b=1,v=0;if(t>=i&&t<c){const e=M(t,d,a);p=0,v=e,m=0,u()}else if(t>=c&&t/2<i)p=Math.floor(t-c),v=450,m=0,u(p);else if(t>=c&&t/i>=2&&m<2){p=t/2,b+=1;const e=M(p,d,a);v=e,m=0,u()}else{if(p<i)for(;b<5&&!(p>=i&&p/b>=i);)m-=1,p+=d,b+=1;p/=b;const e=M(p,d,a);v=e,u()}n.append(o)}else o.innerHTML="";var l},A=(e,t)=>{Object.keys(t).forEach((n=>{const r=document.querySelectorAll(`${t[n]}`);r.length>0&&(Array.isArray(e[n])?r.forEach(((t,r)=>{const a=t;e[n][r]&&(a.value=e[n][r])})):r.forEach((t=>{t.value=e[n]})))}))},I=(e,t,n)=>{const r=e.findIndex((e=>e.uid===n));return{isChanged:-1!==r&&JSON.stringify(e[r])===JSON.stringify(t),existingIndex:r}},H=()=>{(()=>{const t=document.querySelector(".forms-wrapper"),n=t.querySelector(".portion-calculate-form");n&&(n.querySelector(".form-button-convert").removeEventListener("click",k),n.remove());const r=e("form","form portion-calculate-form");r.setAttribute("id","portion-calculate-form"),r.setAttribute("method","post"),r.setAttribute("novalidate",""),r.innerHTML='\n  <div class="form-group form-fields-group">\n  <label class="form-fields-group-label" for="material-input">Materiał</label>\n  <div class="form-fields-group__wrapper">\n    <input required="" class="form-fields-input" min="0" max="100" type="number" id="material-input"\n      placeholder="54.8">\n    <div class="form-fields-input-group">\n      <span class="form-fields-input-group__adornment">%</span>\n      <button type="button" class="icon-button form-button-convert">\n        <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="AutorenewIcon"\n          tabindex="-1" title="Autorenew">\n          <path\n            d="M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6m6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26">\n          </path>\n        </svg>\n      </button>\n    </div>\n    <div class="custom-popover convert">\n      <label for="convert-to-percent" class="form-label">Przelicz kg na %</label>\n      <input type="number" class="form-control" placeholder="135" id="convert-to-percent">\n    </div>\n  </div>\n</div>\n<div class="form-group form-fields-group">\n  <label class="form-fields-group-label" for="raw-material-input">Ilość surowca</label>\n  <div class="form-fields-group__wrapper">\n    <input required="" class="form-fields-input" min="0" type="number" id="raw-material-input"\n      placeholder="3400">\n    <span class="form-fields-input-adornment">\n      kg\n    </span>\n  </div>\n</div>\n<div class="select-group">\n  <label class="form-fields-group-label" for="mixer-size-select">Podstawowa wielkość mieszałki</label>\n  <select class="form-select" id="mixer-size-select">\n    <option value="400">400kg</option>\n    <option value="410">410kg</option>\n    <option value="420">420kg</option>\n    <option value="430" selected="">430kg</option>\n    <option value="440">440kg</option>\n    <option value="450">450kg</option>\n  </select>\n</div>\n<div class="select-group">\n  <label class="form-fields-group-label" for="grammage-select">Grammatura</label>\n  <select class="form-select" id="grammage-select">\n    <option value="0.4" selected="">400g</option>\n    <option value="0.7">700g</option>\n    <option value="0.8">800g</option>\n    <option value="0.9">900g</option>\n  </select>\n</div>\n<div class="form-button-wrapper">\n  <button type="submit" class="form-button-calculate">Oblicz</button>\n  <button type="button" class="icon-button form-button-clear">\n    <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DeleteIcon"\n      tabindex="-1" title="Delete">\n      <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"></path>\n    </svg>\n  </button>\n</div>',t.append(r),document.querySelector(".form-button-convert").addEventListener("click",k)})();const n=JSON.parse(r("portionTabs")).find((e=>e.selected)).uid,a=JSON.parse(r("portionFormData"))||[],o=document.getElementById("portion-calculate-form"),i=new _(o),s=document.getElementById("material-input"),l=document.getElementById("raw-material-input"),c=document.querySelector(".form-button-clear"),{handleOpen:d}=L();if(i.addMessages("pl",m),i.setLocale("pl"),i.addValidator(l,(()=>Number(s.value)>0),"Wartość % musi być większa niż 0",2,!1),i.addValidator(l,(e=>{const t=270*Number(s.value)/100;return Number(e)>t}),"Ilość materiału jest zbyt mała",3,!1),a&&n){const e=z(a,n);e&&A(e,f)}const u=()=>{o.reset();const e=a.filter((e=>e.uid!==n));t("portionFormData",JSON.stringify(e)),T(n),q("Formularz pomyślnie wyczyszczony!",p)};T(n),o.addEventListener("submit",(e=>{if(e.preventDefault(),i.validate()){const e={uid:n,percentage:Number(s.value),totalRawMaterial:Number(l.value),mixerSize:Number(document.getElementById("mixer-size-select").value),grammage:Number(document.getElementById("grammage-select").value)},{isChanged:r,existingIndex:o}=I(a,e,n);if(r)return;-1!==o?a[o]=e:a.push(e),t("portionFormData",JSON.stringify(a)),T(n)}})),c.addEventListener("click",(()=>{d(h,y,u)}))},B=e=>{const t=e.files[0];let n=t.name;if(t.name.length>20){const e=Math.floor(8.5),t=n.length-Math.ceil(8.5);n=`${n.substring(0,e)}...${n.substring(t)}`}else n=t.name;e.nextElementSibling.innerHTML=n,function(){const e=document.querySelector("#RTPJ"),t=document.querySelectorAll(".material-description"),n=document.querySelectorAll(".material-index"),r=document.querySelectorAll(".material-percentage"),a=document.getElementById("fileInput").files[0];if(a){const o=new FileReader;o.onload=a=>{try{const o=a.target.result,i=(new DOMParser).parseFromString(o,"text/xml"),s=i.getElementsByTagName("Tablix4")[0].getAttribute("Textbox82");e.value=Number(s.match(/\d+/)[0]);const l=i.getElementsByTagName("Details_Collection")[0].getElementsByTagName("Details");for(let e=0;e<l.length;e+=1){const a=l[e].getAttribute("MATERIAL_DESCRIPTION"),o=l[e].getAttribute("MATERIAL1"),i=l[e].getAttribute("Percentage");t[e].value=`${a.substring(0,15)}...`,n[e].value=Number(o),r[e].value=Number(i)}}catch(e){q("Błąd odczytu pliku!",b)}},o.readAsText(a)}else q("Plik nie jest zaznaczony!",b)}()},D=t=>{const n=t.target.closest(".bigbag-info-button");if(n){const t=document.querySelector(".main"),r=n.getAttribute("data-current"),a=t.querySelector(`#material-quantity-${r}`),o=t.querySelector(`#bigbag-info-${r}`),i=o.querySelectorAll(".form-control"),s=document.querySelector(".custom-popover__overlay")||e("div","custom-popover__overlay"),l=()=>{const e=+o.querySelector(`#average-weight-bb-${r}`).value,t=+o.querySelector(`#bb-count-${r}`).value,n=+o.querySelector(`#additional-quantity-${r}`).value;a.value=e*t+n},c=e=>{"open"===e?(o.classList.add("show-info"),s.addEventListener("click",d),t.append(s)):"close"===e&&(o.classList.remove("show-info"),s.removeEventListener("click",d),s.remove()),i.forEach((t=>{t["open"===e?"addEventListener":"removeEventListener"]("input",l)}))},d=()=>c("close");c("open")}},N=()=>{(()=>{const t=document.querySelector(".forms-wrapper"),n=t.querySelector(".order-calculate-form");if(n){const e=n.querySelector(".input-file input[type=file]");n.querySelector("#material-quantity-row").removeEventListener("click",D),e.removeEventListener("change",B),n.remove()}const r=e("form","form order-calculate-form");r.setAttribute("novalidate",""),r.innerHTML='<div class="container">\n  <div class="row justify-content-lg-center flex-column-reverse flex-xl-row">\n  <div class="col-12 col-xl-8">\n    <div class="table-wrapper">\n        <table class="table table-borderless text-center order-table">\n          <thead>\n            <tr class="border-bottom">\n              <th class="text-start" scope="col">Kod RTPJ</th>\n              <td scope="col" colspan="3">\n                <input class="form-control RTPJ" type="number" id="RTPJ" placeholder="172972">\n              </td>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th scope="row" colspan="4">&nbsp;</th>\n            </tr>\n            <tr class="border-bottom">\n              <th class="text-start" scope="col">Materiał</th>\n              <td scope="col">\n                <input class="form-control material-description" type="text" placeholder="MLE BASE LFD">\n              </td>\n              <td scope="col">\n                <input class="form-control material-description" type="text" placeholder="MB IF 017">\n              </td>\n              <td scope="col">\n                <input class="form-control material-description" type="text" placeholder="MLE BASE IF">\n              </td>\n            </tr>\n            <tr class="border-bottom">\n              <th class="text-start" scope="row">Indeks materiału</th>\n              <td>\n                <input class="form-control material-index" type="text" placeholder="10332596">\n              </td>\n              <td>\n                <input class="form-control material-index" type="text" placeholder="10343216">\n              </td>\n              <td>\n                <input class="form-control material-index" type="text" placeholder="10379607">\n              </td>\n            </tr>\n            <tr class="border-bottom">\n              <th class="text-start" scope="row">Receptura (%):</th>\n              <td>\n                <input class="form-control material-percentage" type="number" placeholder="10">\n              </td>\n              <td>\n                <input class="form-control material-percentage" type="number" placeholder="34">\n              </td>\n              <td>\n                <input class="form-control material-percentage" type="number" placeholder="56">\n              </td>\n            </tr>\n            <tr class="border-bottom" id="material-quantity-row">\n              <th class="text-start" scope="row">Aktualna ilość (kg):</th>\n              <td>\n                <div class="form-group form-fields-group">\n                  <input type="number" class="form-control material-quantity" placeholder="2478"\n                    id="material-quantity-1">\n                  <button class="icon-button bigbag-info-button" type="button" data-current="1">\n                  <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon" tabindex="-1" title="ExpandMore"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>\n                  </button>\n                  <ul class="custom-popover bigbag-info" id="bigbag-info-1">\n                    <li class="bigbag-info__item">\n                      <label for="average-weight-bb-1" class="form-label mb-0">Średnia waga BB</label>\n                      <input type="number" class="form-control px-0" id="average-weight-bb-1" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="bb-count-1" class="form-label mb-0">Ilość BB</label>\n                      <input type="number" class="form-control px-0" id="bb-count-1" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="additional-quantity-1" class="form-label mb-0">Dodatkowa ilość</label>\n                      <input type="number" class="form-control px-0" id="additional-quantity-1" placeholder="0">\n                    </li>\n                  </ul>\n                </div>\n              </td>\n              <td>\n                <div class="form-group form-fields-group">\n                  <input type="number" class="form-control material-quantity" placeholder="900"\n                  id="material-quantity-2">\n                  <button class="icon-button bigbag-info-button" type="button" data-current="2">\n                  <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon" tabindex="-1" title="ExpandMore"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>\n                  </button>\n                  <ul class="custom-popover bigbag-info" id="bigbag-info-2">\n                    <li class="bigbag-info__item">\n                      <label for="average-weight-bb-2" class="form-label mb-0">Średnia waga BB</label>\n                      <input type="number" class="form-control px-0" id="average-weight-bb-2" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="bb-count-2" class="form-label mb-0">Ilość BB</label>\n                      <input type="number" class="form-control px-0" id="bb-count-2" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="additional-quantity-2" class="form-label mb-0">Dodatkowa ilość</label>\n                      <input type="number" class="form-control px-0" id="additional-quantity-2" placeholder="0">\n                    </li>\n                  </ul>\n                </div>\n              </td>\n              <td>\n                <div class="form-group form-fields-group">\n                  <input type="number" class="form-control material-quantity" placeholder="1200"\n                  id="material-quantity-3">\n                  <button class="icon-button bigbag-info-button" type="button" data-current="3">\n                  <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExpandMoreIcon" tabindex="-1" title="ExpandMore"><path d="M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></svg>\n                  </button>\n                  <ul class="custom-popover bigbag-info" id="bigbag-info-3">\n                    <li class="bigbag-info__item">\n                      <label for="average-weight-bb-3" class="form-label mb-0">Średnia waga BB</label>\n                      <input type="number" class="form-control px-0" id="average-weight-bb-3" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="bb-count-3" class="form-label mb-0">Ilość BB</label>\n                      <input type="number" class="form-control px-0" id="bb-count-3" placeholder="0">\n                    </li>\n                    <li class="bigbag-info__item">\n                      <label for="additional-quantity-3" class="form-label mb-0">Dodatkowa ilość</label>\n                      <input type="number" class="form-control px-0" id="additional-quantity-3" placeholder="0">\n                    </li>\n                  </ul>\n                </div>\n              </td>\n            </tr>\n            <tr>\n              <th scope="row" colspan="4">&nbsp;</th>\n            </tr>\n            <tr class="border-bottom">\n              <th class="text-start" scope="row">Ilość do zamówienia (kg):</th>\n              <td>\n                <input class="form-control required-quantity" type="number" value="0" readonly="">\n              </td>\n              <td>\n                <input class="form-control required-quantity" type="number" value="0" readonly="">\n              </td>\n              <td>\n                <input class="form-control required-quantity" type="number" value="0" readonly="">\n              </td>\n\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="col-12 col-xl-4">\n      <table class="table table-borderless text-center">\n        <thead>\n          <tr>\n            <td scope="col" colspan="2">\n              <label class="input-file">\n                <input type="file" name="file" accept=".xml" id="fileInput">\n                <span>Wybierz plik XML</span>\n              </label>\n            </td>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <th scope="row" colspan="2">&nbsp;</th>\n          </tr>\n          <tr class="border-bottom">\n            <th class="text-start" scope="col">Aktualna mieszałka</th>\n            <td scope="col">\n              <input class="form-control" type="number" placeholder="0" id="current-mixer">\n            </td>\n          </tr>\n          <tr class="border-bottom">\n            <th class="text-start" scope="row">Ilość produkcji (szt)</th>\n            <td>\n              <input class="form-control" type="number" placeholder="12354" id="production-quantity">\n            </td>\n          </tr>\n          <tr class="border-bottom">\n            <th class="text-start" scope="row">Wielkość mieszałki</th>\n            <td>\n              <select class="form-select text-center" id="mixer-size-select">\n                <option value="400">400kg</option>\n                <option value="410">410kg</option>\n                <option value="420">420kg</option>\n                <option value="430" selected="">430kg</option>\n                <option value="440">440kg</option>\n                <option value="450">450kg</option>\n              </select>\n            </td>\n          </tr>\n          <tr class="border-bottom">\n            <th class="text-start" scope="row">Grammatura</th>\n            <td>\n              <select class="form-select text-center" id="grammage-select">\n                <option value="0.4" selected="">400g</option>\n                <option value="0.7">700g</option>\n                <option value="0.8">800g</option>\n                <option value="0.9">900g</option>\n              </select>\n            </td>\n          </tr>\n          <tr>\n            <th scope="row" colspan="2">&nbsp;</th>\n          </tr>\n          <tr>\n            <td scope="col">\n              <button type="submit" class="form-button-calculate w-100 m-0">Oblicz</button>\n            </td>\n            <td scope="col">\n              <button type="button" class="icon-button form-button-clear">\n                <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n                  data-testid="DeleteIcon" tabindex="-1" title="Delete">\n                  <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"></path>\n                </svg>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>',t.append(r);const a=document.querySelector(".input-file input[type=file]");a.addEventListener("change",(()=>B(a))),t.querySelector("#material-quantity-row").addEventListener("click",D)})();const{handleOpen:n}=L(),a=document.querySelector(".order-calculate-form"),o=JSON.parse(r("orderTabs")).find((e=>e.selected)).uid,i=JSON.parse(r("orderFormData"))||[],s=document.querySelector(".form-button-clear");if(i&&o){const e=z(i,o);e&&A(e,g)}const l=()=>{a.reset();const e=i.filter((e=>e.uid!==o));t("orderFormData",JSON.stringify(e)),q("Formularz pomyślnie wyczyszczony!",p)};a.addEventListener("submit",(e=>{e.preventDefault();let n={uid:o,RTPJ:"",materialDescription:[],materialIndex:[],materialPercentage:[],materialQuantity:[],requiredQuantity:[],currentMixer:0,productionQuantity:0,mixerSize:430,grammage:.4};const r=a.querySelector("#RTPJ").value||"",s=a.querySelectorAll(".material-description"),l=a.querySelectorAll(".material-index"),c=Number(a.querySelector("#current-mixer").value)||0,d=Number(a.querySelector("#production-quantity").value)||0,u=Number(a.querySelector("#mixer-size-select").value),m=Number(a.querySelector("#grammage-select").value),p=a.querySelectorAll(".material-percentage"),b=a.querySelectorAll(".material-quantity"),v=a.querySelectorAll(".required-quantity"),f=d/(u/m)-c;p.forEach(((e,t)=>{const r=Number(e.value),a=Number(b[t].value),o=(r*u/100*f-a).toFixed(2);v[t].value=o,n.materialDescription[t]=s[t].value,n.materialIndex[t]=l[t].value,n.materialPercentage[t]=r,n.materialQuantity[t]=a,n.requiredQuantity[t]=o})),n={...n,RTPJ:r,currentMixer:c,productionQuantity:d,mixerSize:u,grammage:m};const{isChanged:g,existingIndex:h}=I(i,n,o);g||(-1!==h?i[h]=n:i.push(n),t("orderFormData",JSON.stringify(i)))})),s.addEventListener("click",(()=>{n(h,y,l)}))},C=()=>{"portionForm"===(r("currentForm")||"portionForm")?(S("portionTabs","portionFormData",H),H()):(S("orderTabs","orderFormData",N),N())},$=()=>{const n=r("currentForm")||"portionForm",a=document.querySelector(".main"),o=e("div","drawer"),i=e("div","version"),s=e("div","utils"),l=e("h4","utils__title"),c=e("ul","utils-list"),d=e("div","utils"),u=e("h4","utils__title"),m=e("ul","utils-list");i.innerHTML='<svg class="icon version__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24"\n  data-testid="WidgetsIcon" tabindex="-1" title="Widgets">\n  <path d="M13 13v8h8v-8zM3 21h8v-8H3zM3 3v8h8V3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66z"></path>\n  </svg>\n  <p class="version__text">Aktualna wersja: 1.0.2</p>',l.innerHTML="Kalkulator",u.innerHTML="Konfiguracja",x.forEach((a=>{const o=e("li","utils-list__item");o.setAttribute("id",a.id),o.innerHTML=a.icon;const i=e("p","utils-list__text");i.innerHTML=a.text,v[n].id===a.id&&o.classList.add("selected"),o.addEventListener("click",(()=>(e=>{const n=r("currentForm")||"portionForm";var a,o;v[n].id!==e&&(o=e,document.querySelectorAll(".utils-list__item").forEach((e=>{const t=e.getAttribute("id");e.classList.remove("selected"),t===o&&e.classList.add("selected")})),a=e,document.querySelector(".header__title").innerHTML=v[a].title,t("currentForm",e),document.querySelector(".tabs").remove(),document.querySelector(".forms-wrapper").innerHTML="",C())})(a.id))),o.append(i),c.append(o)})),w.forEach((t=>{const n=e("li","utils-list__item");n.setAttribute("id",t.id),n.innerHTML=t.icon;const r=e("p","utils-list__text");r.innerHTML=t.text,n.append(r),m.append(n)})),s.append(l,c),d.append(u,m),o.append(i,s,d),a.append(o),(()=>{const e=document.querySelector(".burger-button"),t=document.querySelector(".drawer"),n=document.querySelector(".backdrop"),r=()=>{t.classList.contains("drawer-open")&&(t.classList.remove("drawer-open"),n.classList.remove("backdrop-show"),n.removeEventListener("click",r))};window.addEventListener("resize",r),e.addEventListener("click",(()=>{t.classList.add("drawer-open"),n.classList.add("backdrop-show"),n.addEventListener("click",r)}))})()},F=e=>{document.querySelector(e).value=""},O="comments_store",P=()=>new Promise(((e,t)=>{const n=window.indexedDB.open("CommentsDatabase",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=()=>{t(new Error("Błąd podczas otwierania bazy danych!"))},n.onupgradeneeded=e=>{e.target.result.createObjectStore(O,{keyPath:"id"})}})),j=async()=>{try{const e=document.querySelector("#comments-textarea").value.trim();if(""!==e){const t={id:d(),time:Date.now(),text:e},n=(await P()).transaction(O,"readwrite");n.objectStore(O).add(t),await n.complete,F("#comments-textarea"),J(),q("Komentarz dodany pomyślnie!",p)}}catch(e){q("Błąd podczas dodawania komentarza!",b)}},J=async()=>{const e=document.querySelector(".comments-content");e.innerHTML='\n  <div class="loader-container">\n    <div class="loader">\n        <span class="circle-wrapper" role="progressbar">\n            <svg viewBox="22 22 44 44">\n              <circle class="circle" cx="44" cy="44" r="20.2" fill="none" stroke-width="3.6"></circle>\n            </svg>\n        </span>\n    </div>\n  </div>\n  ';try{const e=await P(),t=await(e=>new Promise(((t,n)=>{const r=e.transaction(O,"readonly").objectStore(O).getAll();r.onsuccess=e=>{t(e.target.result)},r.onerror=()=>{n(new Error("Błąd podczas pobierania danych z magazynu obiektów!"))}})))(e),n=(e=>e.sort(((e,t)=>new Date(e.time)-new Date(t.time))))(t);e.close(),setTimeout((()=>{(e=>{const t=document.querySelector(".comments-content");if(0===e.length)t.innerHTML='<p class="info">Dodaj swój pierwszy komentarz, aby rozpocząć!</p>';else{const n=e.map((e=>`\n    <div class="comment">\n      <div class="comment__time">${(e=>{const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${t.getFullYear()} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`})(e.time)}</div>\n      <div class="comment__text">${e.text}</div>\n    </div>\n  `)).join("");t.innerHTML=n,t.lastElementChild.scrollIntoView()}})(n)}),1e3)}catch(t){e.innerHTML='\n<div class="error-container">\n  <span class="error">\n    <svg class="error__icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ErrorIcon"\n      tabindex="-1" title="Error">\n      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z">\n      </path>\n    </svg>\n    <div>\n      <div class="error__text">Wystąpił błąd</div>\n    </div>\n    </span>\n</div>\n  ',q(t.message,b)}},R=J;window.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=document.querySelector("#root"),n=e("header","header"),a=r("currentForm")||"portionForm";n.innerHTML=`\n  <div class="container-fluid">\n    <div class="header__menu">\n      <h1 class="header__title">${v[a].title}</h1>\n      <div class="button-wrapper">\n        <button class="icon-button burger-button">\n        <svg class="icon"\n        focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon" tabindex="-1" title="Menu">\n        <path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path>\n        </svg>\n        </button>\n      </div>\n    </div>\n  </div>\n`,t.append(n)})(),(()=>{const t=document.querySelector("#root"),n=e("main","main"),r=e("div","forms-wrapper");n.append(r),t.append(n)})(),(()=>{const t=document.querySelector(".main"),n=e("div","backdrop"),r=e("div","custom-modal");r.innerHTML='\n  <div>\n    <h2 class="modal__title"></h2>\n    <p class="modal__text"></p>\n  </div>\n  <div class="actions-group">\n    <button class="actions-group__button" id="modal-button-cancel">Anuluj</button>\n    <button class="actions-group__button" id="modal-button-confirm">Ok</button>\n  </div>\n  ',t.append(n,r)})(),$(),(()=>{const t=document.querySelector(".main"),n=e("div","snackbar-container");t.append(n)})(),(()=>{const t=document.querySelector(".main"),n=e("div","comments"),r=e("button","icon-button comments-button"),a=e("div","actions-group"),o=e("button","actions-group__button"),i=e("button","actions-group__button"),s=document.querySelector(".comments__overlay")||e("div","comments__overlay");o.setAttribute("id","comments-button-cancel"),i.setAttribute("id","comments-button-confirm"),o.innerHTML="Anuluj",i.innerHTML="Ok";const l=()=>{n.classList.remove("open-comments"),F("#comments-textarea"),s.remove(),s.removeEventListener("click",l),o.removeEventListener("click",l),i.removeEventListener("click",j)};r.innerHTML='\n    <svg class="icon" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ChatIcon" tabindex="-1"\n        title="Chat">\n      <path\n        d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z">\n      </path>\n    </svg>\n  ',n.innerHTML='\n      <h3 class="comments-title">Uwagi</h3>\n      <div class="comments-content">\n        <div class="comment">\n          <div class="comment__time">09.04.2024 10:10</div>\n          <div class="commnet__text">\n            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam iste tempore et illum, aspernatur ipsa\n            id quidem fuga consequatur vitae, perspiciatis officiis reprehenderit distinctio recusandae eveniet\n            obcaecati iusto labore voluptatem.\n          </div>\n        </div>\n        <div class="comment">\n          <div class="comment__time">09.04.2024 10:10</div>\n          <div class="commnet__text">\n            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam iste tempore et illum, aspernatur ipsa\n            id quidem fuga consequatur vitae, perspiciatis officiis reprehenderit distinctio recusandae eveniet\n            obcaecati iusto labore voluptatem.\n          </div>\n        </div>\n        <div class="comment">\n          <div class="comment__time">09.04.2024 10:10</div>\n          <div class="commnet__text">\n            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam iste tempore et illum, aspernatur ipsa\n            id quidem fuga consequatur vitae, perspiciatis officiis reprehenderit distinctio recusandae eveniet\n            obcaecati iusto labore voluptatem.\n          </div>\n        </div>\n        <div class="comment">\n          <div class="comment__time">09.04.2024 10:10</div>\n          <div class="commnet__text">\n            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Laboriosam iste tempore et illum, aspernatur ipsa\n            id quidem fuga consequatur vitae, perspiciatis officiis reprehenderit distinctio recusandae eveniet\n            obcaecati iusto labore voluptatem.\n          </div>\n        </div>\n      </div>\n      <textarea class="comments__textarea" id="comments-textarea" cols="20" rows="5"\n        placeholder="Napisz komentarz..."></textarea>\n      ',r.addEventListener("click",(()=>{n.classList.contains("open-comments")?l():(R(),n.classList.add("open-comments"),o.addEventListener("click",l),i.addEventListener("click",j),s.addEventListener("click",l),t.append(s))})),a.append(o,i),n.append(a),t.append(n,r)})(),C()}))})()})();